<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>プライベートチャンネル一覧画面</title>
    <link rel="stylesheet" href="../../static/css/private_channel.css">
    <link rel="icon" href="../../static/img/favicon.ico" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;900&family=M+PLUS+1:wght@200&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <h1 class="app-name">WOPR <span>WORKS | PRIVATE</span></h1>
            <div class="channel-icon-header2" id="channel-header">
                <a class="logout" href="{{ url_for('logout') }}" ><img src="../../static/img/Log out.png" class="logout" /></a>
            </div>
        </div>
    </header>
    <nav class="tab-menu">
        <a class="tab-works" href="{{ url_for('work_channels_view') }}">WORKS</a>
        <a class="tab-private">PRIVATE</a>
    </nav>
    <div class="container">
        <ul class="channel-list">
            <script type="text/javascript">
                const channels = JSON.parse('{{ channels|tojson }}');
                const createChannelsList = () => {
                    const ul = document.querySelector(".channel-list");
                    // 一度チャンネルリストを空にする
                    ul.innerHTML = "";
                    // 各チャンネル要素の作成
                    channels.forEach((channels) => {
                        const a = document.createElement("a");
                        const li = document.createElement("li");
                        const channelURL = `/private_chat/${channels.channel_id}/messages`;
                        a.innerText = channels.channel_name;
                        a.setAttribute("href", channelURL);
                        li.appendChild(a);
                        ul.appendChild(li); // ulにliを追加
                    });
                };
                createChannelsList();
            </script>
        </ul>
        <div class="add-button" onclick="openModal()">＋</div>
    </div>
    <div class="modal" id="modal">
        <div class="modal-content">
            <label for="channel-name">チャンネル名</label>
            <input type="text" id="channel-name" placeholder="チャンネル名を入力">
            <button class="create-button">作成</button>
            <button class="close-button" onclick="closeModal()">閉じる</button>
        </div>
    </div>
    <script>
        function openModal() {
            document.getElementById("modal").style.display = "flex";
        }
        function closeModal() {
            document.getElementById("modal").style.display = "none";
        }
    </script>
</body>
</html>
